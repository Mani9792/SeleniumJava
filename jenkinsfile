pipeline {
    agent any
   parameters {
        choice(
            name: 'TEST_TYPE',
            choices: ['smoke', 'regression'],
            description: 'Select the type of test to run'
              )
    }
    stages {
        stage('Build') {
            steps {
                echo 'Building..'
            }
        }
       stage('Run Tests') {
            steps {
                script {
                    if (params.TEST_TYPE == 'smoke') {
                        echo "Running smoke tests..."
                        bat 'mvn clean install -DsuiteFile=smoke.xml'
                    } else if (params.TEST_TYPE == 'regression') {
                        echo "Running regression tests..."
                        bat 'mvn clean install -DsuiteFile=regression.xml'
                    } else {
                        error("Unknown test type: ${params.TEST_TYPE}")
                    }
                }
            }
        }
    }
post {
    always {
        junit '**\\target\\surefire-reports\\*.xml'

        publishHTML([
            allowMissing: false,
            alwaysLinkToLastBuild: true,
            keepAll: true,
            reportDir: 'test-output',
            reportFiles: 'ExtentReport.html',
            reportName: 'Extent Report'
        ])
    }
}
}
